<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!--<base href="/" />-->
  <title>eardish</title>
  <link rel="shortcut icon" href="assets/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

  <!-- Global Styles -->
  <link rel="stylesheet" href="styles/main.css" />

  <!-- Vendor Scripts -->
  <script src="vendor/aws-sdk.js"></script>
  <script src="vendor/webcomponents.js"></script>
  <script src="vendor/polymer.js"></script>
  <script src="vendor/traceur-runtime.js"></script>
  <script src="vendor/es6-module-loader.js"></script>
  <script src="vendor/system.js"></script>
  <link rel="import" href="vendor/app-router.html" />

  <!-- Eardish Views -->
  <link rel="import" href="views/views.html" />

</head>

<body unresolved>

<section id="splash-screen">
  <svg>
    <use xlink:href="/assets/icons/svg.svg#eardish-logo-with-slogan"></use>
  </svg>
  <script>
    (function(){
      // TODO component this
      var here = document.getElementById("splash-screen");
      here.addEventListener( "transitionend", function( event ) {
        here.hidden = true;
      });
    })();
  </script>
</section>

<ed-side-menu id="side-menu"></ed-side-menu>

<div id="animation-wrapper">
  <app-router id="root-app-router" mode="auto" trailingSlash="ignore" typecast="string">
    <!-- ROOT -->
    <app-route path="/" redirect="/login"></app-route>

    <!-- LOGIN -->
    <app-route path="/login" element="ed-login-view" bindRouter></app-route>

    <!-- REGISTRATION -->
    <app-route regex path="/^\/(register|registration)$/i" element="ed-registration-view" bindRouter></app-route>

    <!-- ONBOARDING -->
    <app-route path="/onboarding/**" element="ed-onboarding-view"></app-route>
    <app-route path="/onboarding" redirect="/onboarding/like"></app-route>

    <!-- PROFILE -->
    <app-route path="/profile/edit" element="ed-profile-edit"></app-route>
    <app-route path="/artist/:ed-id" element="ed-profile-artist" onUrlChange="updateModel"></app-route>
    <app-route path="/fan/:ed-id" element="ed-profile-fan" onUrlChange="updateModel"></app-route>

    <!-- RETRIEVE PASSWORD -->
    <app-route path="/forgot-pass/**" element="ed-forgot-pass-view"></app-route>

    <!-- CHARTS -->
    <app-route path="/charts" element="ed-charts-view"></app-route>

    <!-- SETTINGS -->
    <app-route path="/settings" element="ed-settings-view"></app-route>

    <!-- DISCOVER -->
    <app-route path="/discover" element="ed-discover-view"></app-route>

    <!-- ABOUT -->
    <app-route path="/about" element="ed-about-view"></app-route>

    <!-- TOS -->
    <app-route path="/tos" element="ed-tos-view"></app-route>

    <!-- REFERRAL -->
    <app-route path="/referral" element="ed-referral-view"></app-route>

    <!-- REPORT -->
    <app-route path="/report" element="ed-report-view"></app-route>

    <!--<app-route path=""-->

    <!-- DEBUG PAGE -->
    <app-route path="/debug">
      <template>
        <style>
          nav {
            font-size: 1.5rem;
            margin: 20px;
          }

          nav > a {
            float: left;
            clear: both;
          }
        </style>
        <h1>Routes</h1>
        <nav>
          <a href="#/home">Home</a>
          <a href="#/login">Login</a>
          <a href="#/register">Register (/register)</a>
          <a href="#/registration">Register (/registration)</a>
          <a href="#/onboarding">Onboarding</a>
          <a href="#/profile/edit">Profile /Edit</a>
          <a href="#/artist/22">Artist</a>
          <a href="#/fan/10">Fan</a>
          <a href="#/forgot-pass/request">Forgot Password Request</a>
          <a href="#/forgot-pass/reset">Forgot Password Reset</a>
          <a href="#/player">Song Card</a>
          <a href="#/charts">Charts</a>
          <a href="#/settings">Settings</a>
          <a href="#/about">About</a>
          <a href="#/tos">Terms of Service</a>
          <a href="#/discover">Discover Music</a>
          <a href="#/referral">Invite Friends</a>
          <a href="#/report">Report A Bug</a>
        </nav>
      </template>
    </app-route>

    <!-- catch all route, 404 page? or redirect... -->
    <app-route path="*" redirect="/login"></app-route>
  </app-router>
</div>

<ed-song-card-view id="song-card"></ed-song-card-view>

<!-- APPLICATION SCRIPT -->
<script src="domain/main.script.js" type="text/javascript"></script>

<!-- REMOVE FOR PRODUCTION -->
<script id="reload-tag" type="text/javascript">
  (function( window, document ){
    // Live Reload Script
    if( ( /^local.eardish|localhost|:5115/g ).test( location.host ) ) {
      document.write(
          "<script src=\"http://" +
          ( location.host || "localhost" ).split( ":" )[0] +
          ":35729/livereload.js\"></" +
          "script>"
      );
    }

    // Remove this script tag
    window.setTimeout(function(){
      document.body.removeChild(this);
    }.bind( document.getElementById( "reload-tag" ) ), 200);
  })( window, document );
</script>
<!--END REMOVE FOR PRODUCTION -->

</body>
</html>
